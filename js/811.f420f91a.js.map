{"version":3,"file":"js/811.f420f91a.js","mappings":"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","sources":["webpack://vue-course/./src/libs/utils.js","webpack://vue-course/./src/components/AppBtnError.vue","webpack://vue-course/./src/components/AppBtnError.vue?d951","webpack://vue-course/./src/components/AppDialog.vue","webpack://vue-course/./src/components/AppDialog.vue?11d9","webpack://vue-course/./src/components/AppLoader.vue","webpack://vue-course/./src/composables/useAsyncDialog.js","webpack://vue-course/./src/components/CartProductItem.vue","webpack://vue-course/./src/components/CartProductItem.vue?2936","webpack://vue-course/./src/components/AppDialogConfirm.vue","webpack://vue-course/./src/pages/CartPage.vue","webpack://vue-course/./src/pages/CartPage.vue?ffe3"],"sourcesContent":["export const removeEmptyFilterFields = (filterFields) => {\n  return Object.entries(filterFields).reduce((acc, [key, value]) => {\n    if (typeof value === \"string\" && value === \"\") return acc;\n    if (typeof value === \"number\" && !value) return acc;\n    if (!value) return acc;\n\n    return { ...acc, [key]: value };\n  }, {});\n};\n\nexport const numberToPrice = (number) => Intl.NumberFormat().format(number);\n\nexport const declensionNumber = (number, words) => {\n  return words[\n    number % 100 > 4 && number % 100 < 20\n      ? 2\n      : [2, 0, 1, 1, 1, 2][number % 10 < 5 ? number % 10 : 5]\n  ];\n};\n\nexport const getMessagesFromInputRules = (rules, value) => {\n  return rules\n    ?.map((validation) => {\n      const result = validation(value);\n      return typeof result === \"string\" ? result : \"\";\n    })\n    .filter((message) => message !== \"\");\n};\n","<template>\n  <div>\n    <slot />\n\n    <button v-on=\"$attrs\" class=\"filter__submit button\">\n      Попробовать еще раз\n    </button>\n  </div>\n</template>\n","import { render } from \"./AppBtnError.vue?vue&type=template&id=5a989b9e\"\nconst script = {}\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div :style=\"{ '--color': $attrs.color || '#fff' }\" class=\"dialog\">\n    <div class=\"dialog__overlay\" @click=\"$emit('close')\"></div>\n    <div class=\"dialog__content\">\n      <div class=\"dialog__body\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.dialog {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.75);\n\n  padding: 30px;\n  z-index: 1;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    cursor: pointer;\n  }\n\n  &__content {\n    position: absolute;\n    background-color: transparent;\n    border: none;\n    z-index: 2;\n  }\n\n  &__body {\n    background-color: var(--color);\n\n    min-height: 150px;\n    width: auto;\n\n    display: inline-flex;\n    flex-direction: column;\n    align-items: center;\n\n    z-index: 1;\n    overflow: hidden;\n\n    padding: 1.6rem 3rem;\n\n    font-size: 1.2rem;\n    border: 3px solid black;\n    border-radius: 5px;\n    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.2);\n  }\n\n  &__actions {\n    margin-top: auto;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n\n    .btn {\n      color: inherit;\n      font-family: inherit;\n      font-size: inherit;\n      padding: 0.3rem 3.4rem;\n\n      border: 3px solid black;\n      background-color: #fff;\n      box-shadow: 0 0 0 black;\n      transition: all 0.2s;\n      cursor: pointer;\n    }\n\n    .btn:last-child {\n      margin-left: 2.6rem;\n    }\n\n    .btn:hover {\n      box-shadow: 0.4rem 0.4rem 0 black;\n      transform: translate(-0.4rem, -0.4rem);\n    }\n\n    .btn:active {\n      box-shadow: 0 0 0 black;\n      transform: translate(0, 0);\n    }\n  }\n}\n</style>\n","import { render } from \"./AppDialog.vue?vue&type=template&id=825fc20e&scoped=true\"\nconst script = {}\n\nimport \"./AppDialog.vue?vue&type=style&index=0&id=825fc20e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-825fc20e\"]])\n\nexport default __exports__","import script from \"./AppLoader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppLoader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppLoader.vue?vue&type=style&index=0&id=6cd2041e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6cd2041e\"]])\n\nexport default __exports__","import { ref } from \"vue\";\n\nexport default () => {\n  let confirmResolve = () => {};\n\n  const isOpen = ref(false);\n\n  const openDialog = () => {\n    isOpen.value = true;\n\n    return new Promise((resolve) => (confirmResolve = resolve));\n  };\n\n  const confirmDialog = () => {\n    confirmResolve(true);\n    isOpen.value = false;\n  };\n\n  const closeDialog = () => {\n    confirmResolve(false);\n    isOpen.value = false;\n  };\n\n  return {\n    isOpen,\n    openDialog,\n    confirmDialog,\n    closeDialog,\n  };\n};\n","<script>\nimport { computed, toRefs } from \"vue\";\nimport { ROUTE_PRODUCT } from \"@/router/routeNames\";\nimport { numberToPrice } from \"@/libs/utils\";\n</script>\n\n<script setup>\nconst emit = defineEmits([\"updateQuantity\", \"removeItem\"]);\nconst props = defineProps({\n  id: [Number || String],\n  quantity: Number,\n  image: String,\n  price: Number,\n  title: String,\n});\n\nconst { id, quantity, image, price, title } = toRefs(props);\nconst totalPrice = computed(() => quantity.value * price.value);\n\nconst updateAmount = (value) => {\n  if (!value) return emit(\"removeItem\", id.value);\n\n  emit(\"updateQuantity\", { productId: id.value, quantity: value });\n};\n</script>\n\n<template>\n  <li class=\"cart__item product\">\n    <div class=\"product__pic\">\n      <img :src=\"image\" width=\"120\" height=\"120\" :alt=\"title\" />\n    </div>\n    <router-link\n      :to=\"{ name: ROUTE_PRODUCT, params: { id } }\"\n      class=\"product__title\"\n    >\n      {{ title }}\n    </router-link>\n    <span class=\"product__code\"> Артикул: {{ id }} </span>\n\n    <div class=\"product__counter form__counter\">\n      <button\n        @click=\"updateAmount(quantity - 1)\"\n        type=\"button\"\n        aria-label=\"Убрать один товар\"\n      >\n        <svg width=\"10\" height=\"10\" fill=\"currentColor\">\n          <use xlink:href=\"#icon-minus\"></use>\n        </svg>\n      </button>\n\n      <input\n        type=\"text\"\n        :value=\"quantity\"\n        @blur=\"({ target }) => updateAmount(+target.value)\"\n        name=\"count\"\n      />\n\n      <button\n        @click=\"updateAmount(quantity + 1)\"\n        type=\"button\"\n        aria-label=\"Добавить один товар\"\n      >\n        <svg width=\"10\" height=\"10\" fill=\"currentColor\">\n          <use xlink:href=\"#icon-plus\"></use>\n        </svg>\n      </button>\n    </div>\n\n    <b class=\"product__price\"> {{ numberToPrice(totalPrice) }} ₽ </b>\n\n    <button\n      @click=\"emit('removeItem', id)\"\n      class=\"product__del button-del\"\n      type=\"button\"\n      aria-label=\"Удалить товар из корзины\"\n    >\n      <svg width=\"20\" height=\"20\" fill=\"currentColor\">\n        <use xlink:href=\"#icon-close\"></use>\n      </svg>\n    </button>\n  </li>\n</template>\n","import script from \"./CartProductItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CartProductItem.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./AppDialogConfirm.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppDialogConfirm.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppDialogConfirm.vue?vue&type=style&index=0&id=e72fed6e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e72fed6e\"]])\n\nexport default __exports__","<script>\nimport { computed } from \"vue\";\nimport { useCartStore } from \"@/store/cart\";\nimport { ROUTE_MAIN, ROUTE_ORDER } from \"@/router/routeNames\";\nimport useAsyncDialog from \"@/composables/useAsyncDialog\";\nimport { numberToPrice, declensionNumber } from \"@/libs/utils\";\nimport CartProductItem from \"@/components/CartProductItem.vue\";\nimport AppLoader from \"@/components/AppLoader.vue\";\nimport AppBtnError from \"@/components/AppBtnError.vue\";\nimport AppDialogConfirm from \"@/components/AppDialogConfirm.vue\";\n</script>\n\n<script setup>\nconst store = useCartStore();\nconst { isOpen, openDialog, confirmDialog, closeDialog } = useAsyncDialog();\n\nconst cartInfoMsg = computed(() => {\n  const count = store.itemsCount;\n  const declension = declensionNumber(count, [\"товар\", \"товара\", \"товаров\"]);\n\n  return `${count} ${declension}`;\n});\n\nconst removeFromCart = async (id) => {\n  const isConfirm = await openDialog();\n\n  if (isConfirm) store.removeFromCart(id);\n};\n</script>\n\n<template>\n  <app-dialog-confirm\n    v-if=\"isOpen\"\n    @confirm=\"confirmDialog\"\n    @close=\"closeDialog\"\n  >\n    Удалить продукт из корзины?\n  </app-dialog-confirm>\n\n  <main class=\"content container\">\n    <div class=\"content__top\">\n      <ul class=\"breadcrumbs\">\n        <li class=\"breadcrumbs__item\">\n          <router-link :to=\"{ name: ROUTE_MAIN }\" class=\"breadcrumbs__link\">\n            Каталог\n          </router-link>\n        </li>\n        <li class=\"breadcrumbs__item\">\n          <a class=\"breadcrumbs__link\"> Корзина </a>\n        </li>\n      </ul>\n\n      <h1 class=\"content__title\">Корзина</h1>\n      <span class=\"content__info\"> {{ cartInfoMsg }} </span>\n    </div>\n\n    <app-loader v-if=\"store.isLoading\" />\n    <app-btn-error v-else-if=\"store.isError\" @click=\"store.getCartProducts\">\n      Что-то пошло не так.\n    </app-btn-error>\n\n    <section v-else class=\"cart\">\n      <form\n        @submit.prevent=\"$router.push({ name: ROUTE_ORDER })\"\n        class=\"cart__form form\"\n      >\n        <div class=\"cart__field\">\n          <ul class=\"cart__list\">\n            <cart-product-item\n              v-for=\"{ product, quantity } in store.items\"\n              :key=\"product.id\"\n              :quantity=\"quantity\"\n              @remove-item=\"removeFromCart\"\n              @update-quantity=\"store.updateQuantity\"\n              :id=\"product.id\"\n              :title=\"product.title\"\n              :price=\"product.price\"\n              :image=\"product.image.file.url\"\n            />\n          </ul>\n        </div>\n\n        <div class=\"cart__block\">\n          <p class=\"cart__desc\">\n            Мы&nbsp;посчитаем стоимость доставки на&nbsp;следующем этапе\n          </p>\n          <p class=\"cart__price\">\n            Итого: <span>{{ numberToPrice(store.cartTotal) }} ₽</span>\n          </p>\n\n          <button\n            v-show=\"store.cartTotal\"\n            class=\"cart__button button button--primery\"\n            type=\"submit\"\n          >\n            Оформить заказ\n          </button>\n        </div>\n      </form>\n    </section>\n  </main>\n</template>\n","import script from \"./CartPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CartPage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["removeEmptyFilterFields","filterFields","Object","entries","reduce","acc","key","value","numberToPrice","number","Intl","NumberFormat","format","declensionNumber","words","getMessagesFromInputRules","rules","map","validation","result","filter","message","_createElementBlock","_renderSlot","_ctx","_createElementVNode","_toHandlers","class","script","__exports__","render","style","color","onClick","undefined","confirmResolve","isOpen","ref","openDialog","Promise","resolve","confirmDialog","closeDialog","id","quantity","image","price","title","toRefs","props","totalPrice","computed","updateAmount","emit","productId","store","useCartStore","useAsyncDialog","cartInfoMsg","count","itemsCount","declension","removeFromCart","async","isConfirm"],"sourceRoot":""}