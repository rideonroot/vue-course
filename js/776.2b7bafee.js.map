{"version":3,"file":"js/776.2b7bafee.js","mappings":"4NAAO,MAAMA,EAA2BC,GAC/BC,OAAOC,QAAQF,GAAcG,QAAO,CAACC,GAAMC,EAAKC,KAChC,kBAAVA,GAAgC,KAAVA,EAAqBF,GACjC,kBAAVE,GAAuBA,IAC7BA,EAEE,IAAKF,EAAK,CAACC,GAAMC,GAHwBF,GAI/C,CAAC,GAGOG,EAAiBC,GAAWC,KAAKC,eAAeC,OAAOH,GAEvDI,EAAmB,CAACJ,EAAQK,IAChCA,EACLL,EAAS,IAAM,GAAKA,EAAS,IAAM,GAC/B,EACA,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAGA,EAAS,GAAK,EAAIA,EAAS,GAAK,IAI9CM,EAA4B,CAACC,EAAOT,IACxCS,GACHC,KAAKC,IACL,MAAMC,EAASD,EAAWX,GAC1B,MAAyB,kBAAXY,EAAsBA,EAAS,EAA7C,IAEDC,QAAQC,GAAwB,KAAZA,G,uGCzBvBC,EAAAA,EAAAA,IAMM,aALJC,EAAAA,EAAAA,IAAQC,EAAAA,OAAA,YAERC,EAAAA,EAAAA,GAES,UAFT,SAAQC,EAAAA,EAAAA,IAAMF,EAAO,QAAD,IAAEG,MAAM,0BAAwB,wBAEpD,K,aCLJ,MAAMC,EAAS,CAAC,EAGVC,GAA2B,OAAgBD,EAAQ,CAAC,CAAC,SAASE,KAEpE,O,2WCAA,MAAMD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,yHCLA,OACE,MAAME,GAAQC,EAAAA,EAAAA,IAAS,CACrBC,SAAU,GACVC,WAAY,EACZC,WAAW,EACXC,MAAO,OAGHC,EAAkBC,UACtB,MAAMC,EAAQC,GAAQD,OAAS,EAE/B,IACER,EAAMI,WAAY,EAClBJ,EAAMK,MAAQ,KAEd,MAAM,SAAEH,EAAF,MAAYQ,SAAgBC,EAAAA,EAAAA,YAAgB,IAC7CF,EACHD,QACAI,KAAMH,EAAOG,OAGfZ,EAAME,SAAWA,EACjBF,EAAMG,WAAaU,KAAKC,KAAKJ,EAAQF,EAKtC,CAJC,MAAOH,GACPL,EAAMK,MAAQA,CACf,CAdD,QAeEL,EAAMI,WAAY,CACnB,GAGH,MAAO,KACFW,EAAAA,EAAAA,IAAOf,GACVgB,YAAaV,EAhCjB,E,kUCYM,MAAEW,EAAF,MAASC,EAAT,MAAgBC,EAAhB,OAAuBC,EAAvB,GAA+BC,IAAON,EAAAA,EAAAA,IAAOO,GAC7CC,GAAcC,EAAAA,EAAAA,IAAIJ,EAAO5C,MAAM,GAAG6C,I,0yBCbxC,MAAMvB,EAAc,EAEpB,Q,iWCFA,MAAM,EAAc,EAEpB,QCHA,MAAM2B,EAAW,CAACC,EAAMC,KACtB,MAAMC,EAAQ,GACRC,EAAQH,EAAO,EAAIA,EAAO,EAEhC,IAAK,IAAII,EAAID,EAAOC,GAAKH,EAAIG,IAAKF,EAAMG,KAAKD,GAE7C,OAAOF,CAAP,EAGF,QAAkBhB,OAAMoB,eAAcC,aAC7BC,EAAAA,EAAAA,KAAS,KACd,MAAMC,EAAYtB,KAAKuB,IAAIvB,KAAKwB,IAAI,EAAGL,IAAiBC,EAAQA,GAEhE,GAAIA,GAAUE,EAAW,OAAOV,EAAS,EAAGQ,GAE5C,MAAMK,EAAOH,EAAY,IAAM,EAAI,EAAI,EACjCI,EAAO1B,KAAK2B,MAAML,EAAY,GAC9BM,EAAQR,EAASM,EAAO,EAAID,EAElC,GAAI1B,EAAO2B,GAAQ3B,EAAO6B,EAAO,CAC/B,MAAMC,EAAY,EACZC,EAAWV,EACXJ,EAAQjB,EAAO2B,EAAO,EACtBK,EAAMhC,EAAO2B,EAAO,EAAID,EACxBO,EAAahB,EAAQ,IAAMa,EAAY,EAAI,EAAI,MAC/CI,EAAiBF,EAAM,IAAMD,EAAW,EAAIC,EAAM,EAAI,MAE5D,MAAO,CACLF,EACAG,KACGpB,EAASI,EAAOe,GACnBE,EACAb,EAEH,CAAM,GAAIrB,IAAS2B,EAAM,CACxB,MAAMK,EAAMhC,EAAO2B,EAAO,EAAID,EAE9B,MAAO,IAAIb,EAAS,EAAGmB,GAAM,MAAOX,EACrC,CAAM,GAAIrB,IAAS6B,EAAO,CACzB,MAAMZ,EAAQjB,EAAO2B,EAAO,EAE5B,MAAO,CAAC,EAAG,SAAUd,EAASI,EAAOI,GACtC,CACC,MAAO,IAAIR,EAAS,EAAGc,GAAO,SAAUd,EAASgB,EAAOR,GACzD,I,ijBCjCC,KAAErB,EAAF,WAAQT,EAAR,aAAoB6B,IAAiBjB,EAAAA,EAAAA,IAAOO,GAC5CyB,GAAcb,EAAAA,EAAAA,KAAS,IAAM/B,EAAW3B,MAAQ,IAEhDwE,EAAYC,EAAc,CAC9BrC,KAAMA,EAAKpC,MACXyD,OAAQ9B,EAAW3B,MACnBwD,aAAcA,EAAaxD,QAGvB0E,EAAcC,IACdA,EAAa,GAAKA,EAAahD,EAAW3B,OAE9C4E,EAAK,cAAeD,EAApB,E,g8BCtBF,MAAM,EAAc,EAEpB,QCFA,OACE,MAAMnD,GAAQC,EAAAA,EAAAA,IAAS,CACrBG,WAAW,EACXC,MAAO,KACPgD,WAAY,GACZjC,OAAQ,KAGJkC,EAAoB/C,UACxB,IACEP,EAAMI,WAAY,EAClB,MAAM,WAAEiD,EAAF,OAAcjC,SAAiBT,EAAAA,EAAAA,aAErCX,EAAMqD,WAAaA,EACnBrD,EAAMoB,OAASA,CAKhB,CAJC,MAAOf,GACPL,EAAMK,MAAQA,CACf,CARD,QASEL,EAAMI,WAAY,CACnB,GAGH,MAAO,KACFW,EAAAA,EAAAA,IAAOf,GACVuD,WAAYD,EAxBhB,E,83BCIME,EAAkB,CACtBC,SAAU,EACVC,SAAU,EACVC,WAAY,GACZC,QAAS,KAML,WAAEP,EAAF,OAAcjC,EAAd,WAAsBmC,GAAeM,KAErC,eAAEC,IAAmB/C,EAAAA,EAAAA,IAAOO,GAC5ByC,GAAU9D,EAAAA,EAAAA,IAAS,IAAKuD,KAAoBM,EAAetF,QAC3DwF,GAAkB9B,EAAAA,EAAAA,KAAS,KAAMjE,EAAAA,EAAAA,IAAwB8F,KAEzDE,EAAgB,KACpBb,EAAK,iBAAkB,IAAKY,EAAgBxF,OAA5C,EAGI0F,EAAe,KACnBd,EAAK,iBAAkB,CAAC,GAExBjF,OAAOgG,OAAOJ,EAASP,EAAvB,E,OAGFY,EAAAA,EAAAA,IAAUb,G,w7CC9BV,MAAM,GAAc,GAEpB,U,yUCOA,MAAMc,GAAe7C,EAAAA,EAAAA,KAAI,GACnB8C,GAAc9C,EAAAA,EAAAA,IAAI,GAClBuC,GAAUvC,EAAAA,EAAAA,IAAI,CAAC,IAEf,SAAEtB,EAAF,UAAYE,EAAZ,WAAuBD,EAAvB,MAAmCE,EAAnC,YAA0CW,GAAgBuD,IAC1DC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAERC,EAAiBrE,UACrB,MAAMsE,EAAiB,EACjBC,EAAQ,CAAElE,KAAM0D,EAAY9F,SAAUuF,EAAQvF,OAEpDgG,EAAOzC,KAAK,CAAE+C,UACd9D,EAAY,IAAK8D,EAAOtE,MAAOqE,GAA/B,EAGIE,EAAkBC,IACtBV,EAAY9F,MAAQ,EACpBuF,EAAQvF,MAAQwG,EAEhBJ,GAAgB,E,OAGlBK,EAAAA,EAAAA,IAAMX,EAAaM,IAEnBR,EAAAA,EAAAA,KAAU,KACR,MAAM,KAAExD,KAASsE,GAAgBR,EAAMI,MAEnClE,IAAM0D,EAAY9F,OAASoC,GAC/BmD,EAAQvF,MAAQ0G,EAEhBN,IAAiBO,MAAK,IAAOd,EAAa7F,OAAQ,GAAlD,I,yjBCxCF,MAAM,GAAc,GAEpB,S","sources":["webpack://vue-course/./src/libs/utils.js","webpack://vue-course/./src/components/AppBtnError.vue","webpack://vue-course/./src/components/AppBtnError.vue?d951","webpack://vue-course/./src/components/AppLoader.vue","webpack://vue-course/./src/composables/useProducts.js","webpack://vue-course/./src/components/ProductListItem.vue","webpack://vue-course/./src/components/ProductListItem.vue?8bc0","webpack://vue-course/./src/components/ProductList.vue","webpack://vue-course/./src/composables/usePagination.js","webpack://vue-course/./src/components/AppPagination.vue","webpack://vue-course/./src/components/AppPagination.vue?ff5c","webpack://vue-course/./src/composables/useFilters.js","webpack://vue-course/./src/components/ProductFilter.vue","webpack://vue-course/./src/components/ProductFilter.vue?ddc2","webpack://vue-course/./src/pages/MainPage.vue","webpack://vue-course/./src/pages/MainPage.vue?ecfc"],"sourcesContent":["export const removeEmptyFilterFields = (filterFields) => {\n  return Object.entries(filterFields).reduce((acc, [key, value]) => {\n    if (typeof value === \"string\" && value === \"\") return acc;\n    if (typeof value === \"number\" && !value) return acc;\n    if (!value) return acc;\n\n    return { ...acc, [key]: value };\n  }, {});\n};\n\nexport const numberToPrice = (number) => Intl.NumberFormat().format(number);\n\nexport const declensionNumber = (number, words) => {\n  return words[\n    number % 100 > 4 && number % 100 < 20\n      ? 2\n      : [2, 0, 1, 1, 1, 2][number % 10 < 5 ? number % 10 : 5]\n  ];\n};\n\nexport const getMessagesFromInputRules = (rules, value) => {\n  return rules\n    ?.map((validation) => {\n      const result = validation(value);\n      return typeof result === \"string\" ? result : \"\";\n    })\n    .filter((message) => message !== \"\");\n};\n","<template>\n  <div>\n    <slot />\n\n    <button v-on=\"$attrs\" class=\"filter__submit button\">\n      Попробовать еще раз\n    </button>\n  </div>\n</template>\n","import { render } from \"./AppBtnError.vue?vue&type=template&id=5a989b9e\"\nconst script = {}\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import script from \"./AppLoader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppLoader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppLoader.vue?vue&type=style&index=0&id=6cd2041e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6cd2041e\"]])\n\nexport default __exports__","import { reactive, toRefs } from \"vue\";\nimport api from \"@/api\";\n\nexport default () => {\n  const state = reactive({\n    products: [],\n    pagesCount: 0,\n    isLoading: false,\n    error: null,\n  });\n\n  const getProductsData = async (params) => {\n    const limit = params?.limit || 9;\n\n    try {\n      state.isLoading = true;\n      state.error = null;\n\n      const { products, total } = await api.getProducts({\n        ...params,\n        limit,\n        page: params.page,\n      });\n\n      state.products = products;\n      state.pagesCount = Math.ceil(total / limit);\n    } catch (error) {\n      state.error = error;\n    } finally {\n      state.isLoading = false;\n    }\n  };\n\n  return {\n    ...toRefs(state),\n    getProducts: getProductsData,\n  };\n};\n","<script>\nimport { defineProps, ref, toRefs } from \"vue\";\nimport { numberToPrice } from \"@/libs/utils\";\nimport { ROUTE_PRODUCT } from \"@/router/routeNames\";\n</script>\n\n<script setup>\nconst props = defineProps({\n  id: Number,\n  image: String,\n  title: String,\n  price: Number,\n  colors: Array,\n});\n\nconst { title, image, price, colors, id } = toRefs(props);\nconst activeColor = ref(colors.value[0].id);\n</script>\n\n<template>\n  <div>\n    <router-link\n      :to=\"{ name: ROUTE_PRODUCT, params: { id } }\"\n      class=\"catalog__pic\"\n    >\n      <img :src=\"image\" :alt=\"title\" />\n    </router-link>\n\n    <h3 class=\"catalog__title\">\n      <a href=\"#\">{{ title }}</a>\n    </h3>\n\n    <span class=\"catalog__price\"> {{ numberToPrice(price) }} ₽ </span>\n\n    <ul class=\"colors colors--black\">\n      <li v-for=\"color in colors\" :key=\"color.id\" class=\"colors__item\">\n        <label class=\"colors__label\">\n          <input\n            v-model=\"activeColor\"\n            :value=\"color.id\"\n            type=\"radio\"\n            class=\"colors__radio sr-only\"\n          />\n          <span\n            class=\"colors__value\"\n            :style=\"`background-color: ${color.code}`\"\n          />\n        </label>\n      </li>\n    </ul>\n  </div>\n</template>\n","import script from \"./ProductListItem.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductListItem.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import script from \"./ProductList.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { computed } from \"vue\";\n\nconst getRange = (from, to) => {\n  const range = [];\n  const start = from > 0 ? from : 1;\n\n  for (let i = start; i <= to; i++) range.push(i);\n\n  return range;\n};\n\nexport default ({ page, totalVisible, length }) => {\n  return computed(() => {\n    const maxLength = Math.min(Math.max(0, totalVisible) || length, length);\n\n    if (length <= maxLength) return getRange(1, length);\n\n    const even = maxLength % 2 === 0 ? 1 : 0;\n    const left = Math.floor(maxLength / 2);\n    const right = length - left + 1 + even;\n\n    if (page > left && page < right) {\n      const firstItem = 1;\n      const lastItem = length;\n      const start = page - left + 2;\n      const end = page + left - 2 - even;\n      const secondItem = start - 1 === firstItem + 1 ? 2 : \"...\";\n      const beforeLastItem = end + 1 === lastItem - 1 ? end + 1 : \"...\";\n\n      return [\n        firstItem,\n        secondItem,\n        ...getRange(start, end),\n        beforeLastItem,\n        length,\n      ];\n    } else if (page === left) {\n      const end = page + left - 1 - even;\n\n      return [...getRange(1, end), \"...\", length];\n    } else if (page === right) {\n      const start = page - left + 1;\n\n      return [1, \"...\", ...getRange(start, length)];\n    } else {\n      return [...getRange(1, left), \"...\", ...getRange(right, length)];\n    }\n  });\n};\n","<script>\nimport { computed, toRefs } from \"vue\";\nimport usePagination from \"@/composables/usePagination\";\n</script>\n\n<script setup>\nconst emit = defineEmits([\"update:page\"]);\nconst props = defineProps({\n  page: Number,\n  pagesCount: Number,\n  totalVisible: { type: Number, default: 7 },\n});\n\nconst { page, pagesCount, totalVisible } = toRefs(props);\nconst isMultiPage = computed(() => pagesCount.value > 1);\n\nconst pageItems = usePagination({\n  page: page.value,\n  length: pagesCount.value,\n  totalVisible: totalVisible.value,\n});\n\nconst changePage = (pageNumber) => {\n  if (pageNumber < 1 || pageNumber > pagesCount.value) return;\n\n  emit(\"update:page\", pageNumber);\n};\n</script>\n\n<template>\n  <ul v-if=\"isMultiPage\" class=\"catalog__pagination pagination\">\n    <li class=\"pagination__item\">\n      <a\n        @click.prevent=\"changePage(page - 1)\"\n        :class=\"{ 'pagination__link--disabled': page === 1 }\"\n        class=\"pagination__link pagination__link--arrow\"\n        aria-label=\"Предыдущая страница\"\n        href=\"#\"\n      >\n        <svg width=\"8\" height=\"14\" fill=\"currentColor\">\n          <use xlink:href=\"#icon-arrow-left\"></use>\n        </svg>\n      </a>\n    </li>\n\n    <li\n      v-for=\"pageNumber in pageItems\"\n      :key=\"pageNumber\"\n      class=\"pagination__item\"\n    >\n      <span v-if=\"isNaN(pageNumber)\" class=\"pagination__link\">\n        {{ pageNumber }}\n      </span>\n      <a\n        v-else\n        @click.prevent=\"changePage(pageNumber)\"\n        :class=\"{ 'pagination__link--current': page === pageNumber }\"\n        class=\"pagination__link\"\n        href=\"#\"\n      >\n        {{ pageNumber }}\n      </a>\n    </li>\n\n    <li class=\"pagination__item\">\n      <a\n        class=\"pagination__link pagination__link--arrow\"\n        @click.prevent=\"changePage(page + 1)\"\n        :class=\"{ 'pagination__link--disabled': page === pagesCount }\"\n        href=\"#\"\n        aria-label=\"Следующая страница\"\n      >\n        <svg width=\"8\" height=\"14\" fill=\"currentColor\">\n          <use xlink:href=\"#icon-arrow-right\"></use>\n        </svg>\n      </a>\n    </li>\n  </ul>\n</template>\n","import script from \"./AppPagination.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppPagination.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import api from \"@/api\";\nimport { reactive, toRefs } from \"vue\";\n\nexport default () => {\n  const state = reactive({\n    isLoading: false,\n    error: null,\n    categories: [],\n    colors: [],\n  });\n\n  const getProductFilters = async () => {\n    try {\n      state.isLoading = true;\n      const { categories, colors } = await api.getFilters();\n\n      state.categories = categories;\n      state.colors = colors;\n    } catch (error) {\n      state.error = error;\n    } finally {\n      state.isLoading = false;\n    }\n  };\n\n  return {\n    ...toRefs(state),\n    getFilters: getProductFilters,\n  };\n};\n","<script>\nimport { computed, onMounted, reactive, toRefs } from \"vue\";\nimport useFilters from \"@/composables/useFilters\";\nimport { removeEmptyFilterFields } from \"@/libs/utils\";\n</script>\n\n<script setup>\nconst INITIAL_FILTERS = {\n  minPrice: 0,\n  maxPrice: 0,\n  categoryId: \"\",\n  colorId: \"\",\n};\n\nconst emit = defineEmits([\"filterProducts\"]);\nconst props = defineProps({ initialFilters: Object });\n\nconst { categories, colors, getFilters } = useFilters();\n\nconst { initialFilters } = toRefs(props);\nconst filters = reactive({ ...INITIAL_FILTERS, ...initialFilters.value });\nconst preparedFilters = computed(() => removeEmptyFilterFields(filters));\n\nconst submitFilters = () => {\n  emit(\"filterProducts\", { ...preparedFilters.value });\n};\n\nconst resetFilters = () => {\n  emit(\"filterProducts\", {});\n\n  Object.assign(filters, INITIAL_FILTERS);\n};\n\nonMounted(getFilters);\n</script>\n\n<template>\n  <aside class=\"filter\">\n    <h2 class=\"filter__title\">Фильтры</h2>\n\n    <form @submit.prevent=\"submitFilters\" class=\"filter__form form\">\n      <fieldset class=\"form__block\">\n        <legend class=\"form__legend\">Цена</legend>\n\n        <label class=\"form__label form__label--price\">\n          <input\n            v-model.number=\"filters.minPrice\"\n            type=\"text\"\n            name=\"min-price\"\n            class=\"form__input\"\n          />\n          <span class=\"form__value\">От</span>\n        </label>\n        <label class=\"form__label form__label--price\">\n          <input\n            v-model.number=\"filters.maxPrice\"\n            type=\"text\"\n            name=\"max-price\"\n            class=\"form__input\"\n          />\n          <span class=\"form__value\">До</span>\n        </label>\n      </fieldset>\n\n      <fieldset class=\"form__block\">\n        <legend class=\"form__legend\">Категория</legend>\n\n        <label class=\"form__label form__label--select\">\n          <select\n            v-model=\"filters.categoryId\"\n            class=\"form__select\"\n            name=\"category\"\n          >\n            <option value=\"\">Все категории</option>\n            <option\n              v-for=\"category in categories\"\n              :key=\"category.id\"\n              :value=\"category.id\"\n            >\n              {{ category.title }}\n            </option>\n          </select>\n        </label>\n      </fieldset>\n\n      <fieldset class=\"form__block\">\n        <legend class=\"form__legend\">Цвет</legend>\n        <ul class=\"colors\">\n          <li v-for=\"color in colors\" :key=\"color.id\" class=\"colors__item\">\n            <label class=\"colors__label\">\n              <input\n                v-model=\"filters.colorId\"\n                :value=\"color.id\"\n                class=\"colors__radio sr-only\"\n                type=\"radio\"\n                name=\"color\"\n              />\n              <span\n                class=\"colors__value\"\n                :style=\"`background-color:${color.code}`\"\n              />\n            </label>\n          </li>\n        </ul>\n      </fieldset>\n\n      <button class=\"filter__submit button button--primery\" type=\"submit\">\n        Применить\n      </button>\n      <button\n        @click=\"resetFilters\"\n        class=\"filter__reset button button--second\"\n        type=\"button\"\n      >\n        Сбросить\n      </button>\n    </form>\n  </aside>\n</template>\n","import script from \"./ProductFilter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductFilter.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script>\nimport { onMounted, ref, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport useProducts from \"@/composables/useProducts.js\";\nimport ProductList from \"@/components/ProductList.vue\";\nimport AppPagination from \"@/components/AppPagination.vue\";\nimport ProductFilter from \"@/components/ProductFilter.vue\";\nimport AppLoader from \"@/components/AppLoader.vue\";\nimport AppBtnError from \"@/components/AppBtnError.vue\";\n</script>\n\n<script setup>\nconst isPageLoaded = ref(false);\nconst currentPage = ref(1);\nconst filters = ref({});\n\nconst { products, isLoading, pagesCount, error, getProducts } = useProducts();\nconst router = useRouter();\nconst route = useRoute();\n\nconst searchProducts = async () => {\n  const LIMIT_PER_PAGE = 6;\n  const query = { page: currentPage.value, ...filters.value };\n\n  router.push({ query });\n  getProducts({ ...query, limit: LIMIT_PER_PAGE });\n};\n\nconst filterProducts = (filterParams) => {\n  currentPage.value = 1;\n  filters.value = filterParams;\n\n  searchProducts();\n};\n\nwatch(currentPage, searchProducts);\n\nonMounted(() => {\n  const { page, ...restFilters } = route.query;\n\n  if (page) currentPage.value = +page;\n  filters.value = restFilters;\n\n  searchProducts().then(() => (isPageLoaded.value = true));\n});\n</script>\n\n<template>\n  <main v-if=\"isPageLoaded\" class=\"content container\">\n    <div class=\"content__top content__top--catalog\">\n      <h1 class=\"content__title\">Каталог</h1>\n      <span class=\"content__info\"> 152 товара </span>\n    </div>\n\n    <div class=\"content__catalog\">\n      <ProductFilter\n        @filter-products=\"filterProducts\"\n        :initial-filters=\"filters\"\n      />\n\n      <app-loader v-if=\"isLoading\" />\n      <app-btn-error v-else-if=\"error\" @click=\"searchProducts\">\n        Что-то пошло не так.\n      </app-btn-error>\n\n      <section v-else class=\"catalog\">\n        <ProductList :products=\"products\" />\n        <AppPagination v-model:page=\"currentPage\" :pages-count=\"pagesCount\" />\n      </section>\n    </div>\n  </main>\n</template>\n","import script from \"./MainPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./MainPage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["removeEmptyFilterFields","filterFields","Object","entries","reduce","acc","key","value","numberToPrice","number","Intl","NumberFormat","format","declensionNumber","words","getMessagesFromInputRules","rules","map","validation","result","filter","message","_createElementBlock","_renderSlot","_ctx","_createElementVNode","_toHandlers","class","script","__exports__","render","state","reactive","products","pagesCount","isLoading","error","getProductsData","async","limit","params","total","api","page","Math","ceil","toRefs","getProducts","title","image","price","colors","id","props","activeColor","ref","getRange","from","to","range","start","i","push","totalVisible","length","computed","maxLength","min","max","even","left","floor","right","firstItem","lastItem","end","secondItem","beforeLastItem","isMultiPage","pageItems","usePagination","changePage","pageNumber","emit","categories","getProductFilters","getFilters","INITIAL_FILTERS","minPrice","maxPrice","categoryId","colorId","useFilters","initialFilters","filters","preparedFilters","submitFilters","resetFilters","assign","onMounted","isPageLoaded","currentPage","useProducts","router","useRouter","route","useRoute","searchProducts","LIMIT_PER_PAGE","query","filterProducts","filterParams","watch","restFilters","then"],"sourceRoot":""}