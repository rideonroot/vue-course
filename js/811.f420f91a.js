"use strict";(self["webpackChunkvue_course"]=self["webpackChunkvue_course"]||[]).push([[811],{5227:function(t,e,n){n.d(e,{Bf:function(){return r},e8:function(){return a},m5:function(){return o},n8:function(){return i}});const r=t=>Object.entries(t).reduce(((t,[e,n])=>"string"===typeof n&&""===n?t:("number"!==typeof n||n)&&n?{...t,[e]:n}:t),{}),a=t=>Intl.NumberFormat().format(t),o=(t,e)=>e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]],i=(t,e)=>t?.map((t=>{const n=t(e);return"string"===typeof n?n:""})).filter((t=>""!==t))},4953:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(3396);function a(t,e){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.WI)(t.$slots,"default"),(0,r._)("button",(0,r.dG)((0,r.mx)(t.$attrs,!0),{class:"filter__submit button"})," Попробовать еще раз ",16)])}var o=n(89);const i={},s=(0,o.Z)(i,[["render",a]]);var l=s},5367:function(t,e,n){n.d(e,{Z:function(){return _}});var r=n(3396),a=n(7139);const o={class:"dialog__content"},i={class:"dialog__body"};function s(t,e){return(0,r.wg)(),(0,r.iD)("div",{style:(0,a.j5)({"--color":t.$attrs.color||"#fff"}),class:"dialog"},[(0,r._)("div",{class:"dialog__overlay",onClick:e[0]||(e[0]=e=>t.$emit("close"))}),(0,r._)("div",o,[(0,r._)("div",i,[(0,r.WI)(t.$slots,"default",{},void 0,!0)])])],4)}var l=n(89);const c={},u=(0,l.Z)(c,[["render",s],["__scopeId","data-v-825fc20e"]]);var _=u},6213:function(t,e,n){n.d(e,{Z:function(){return _}});var r=n(3396),a=n(7139);const o=t=>((0,r.dD)("data-v-6cd2041e"),t=t(),(0,r.Cn)(),t),i=o((()=>(0,r._)("span",{class:"loader"},null,-1))),s=[i];var l={__name:"AppLoader",props:{app:Boolean},setup(t){return(e,n)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["container",{container__app:t.app}])},s,2))}},c=n(89);const u=(0,c.Z)(l,[["__scopeId","data-v-6cd2041e"]]);var _=u},7811:function(t,e,n){n.r(e),n.d(e,{default:function(){return J}});n(7658);var r=n(3396),a=n(4870),o=n(7139),i=n(9242),s=n(2474),l=n(1434),c=()=>{let t=()=>{};const e=(0,a.iH)(!1),n=()=>(e.value=!0,new Promise((e=>t=e))),r=()=>{t(!0),e.value=!1},o=()=>{t(!1),e.value=!1};return{isOpen:e,openDialog:n,confirmDialog:r,closeDialog:o}},u=n(5227);const _={class:"cart__item product"},d={class:"product__pic"},p=["src","alt"],m={class:"product__code"},f={class:"product__counter form__counter"},v=(0,r._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-minus"})],-1),g=[v],b=["value"],U=(0,r._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-plus"})],-1),k=[U],w={class:"product__price"},y=(0,r._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-close"})],-1),S=[y];var C={__name:"CartProductItem",props:{id:[Number||String],quantity:Number,image:String,price:Number,title:String},emits:["updateQuantity","removeItem"],setup(t,{emit:e}){const n=t,{id:i,quantity:s,image:c,price:v,title:U}=(0,a.BK)(n),y=(0,r.Fl)((()=>s.value*v.value)),C=t=>{if(!t)return e("removeItem",i.value);e("updateQuantity",{productId:i.value,quantity:t})};return(t,n)=>{const v=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("li",_,[(0,r._)("div",d,[(0,r._)("img",{src:(0,a.SU)(c),width:"120",height:"120",alt:(0,a.SU)(U)},null,8,p)]),(0,r.Wm)(v,{to:{name:(0,a.SU)(l.e_),params:{id:(0,a.SU)(i)}},class:"product__title"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)((0,a.SU)(U)),1)])),_:1},8,["to"]),(0,r._)("span",m," Артикул: "+(0,o.zw)((0,a.SU)(i)),1),(0,r._)("div",f,[(0,r._)("button",{onClick:n[0]||(n[0]=t=>C((0,a.SU)(s)-1)),type:"button","aria-label":"Убрать один товар"},g),(0,r._)("input",{type:"text",value:(0,a.SU)(s),onBlur:n[1]||(n[1]=({target:t})=>C(+t.value)),name:"count"},null,40,b),(0,r._)("button",{onClick:n[2]||(n[2]=t=>C((0,a.SU)(s)+1)),type:"button","aria-label":"Добавить один товар"},k)]),(0,r._)("b",w,(0,o.zw)((0,a.SU)(u.e8)((0,a.SU)(y)))+" ₽ ",1),(0,r._)("button",{onClick:n[3]||(n[3]=t=>e("removeItem",(0,a.SU)(i))),class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины"},S)])}}};const h=C;var D=h,I=n(6213),$=n(4953),Z=n(5367);const j={class:"dialog__actions"};var q={__name:"AppDialogConfirm",setup(t){return(t,e)=>((0,r.wg)(),(0,r.j4)(Z.Z,(0,r.dG)(t.$attrs,{onClose:e[2]||(e[2]=e=>t.$emit("close"))}),{default:(0,r.w5)((()=>[(0,r.WI)(t.$slots,"default"),(0,r._)("div",j,[(0,r._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("close")),class:"btn"},"Нет"),(0,r._)("button",{onClick:e[1]||(e[1]=e=>t.$emit("confirm")),class:"btn"},"Да")])])),_:3},16))}},x=n(89);const z=(0,x.Z)(q,[["__scopeId","data-v-e72fed6e"]]);var F=z;const Q={class:"content container"},W={class:"content__top"},B={class:"breadcrumbs"},N={class:"breadcrumbs__item"},P=(0,r._)("li",{class:"breadcrumbs__item"},[(0,r._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),H=(0,r._)("h1",{class:"content__title"},"Корзина",-1),O={class:"content__info"},A={key:2,class:"cart"},E={class:"cart__field"},G={class:"cart__list"},K={class:"cart__block"},L=(0,r._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),T={class:"cart__price"},Y={class:"cart__button button button--primery",type:"submit"};var M={__name:"CartPage",setup(t){const e=(0,s.x)(),{isOpen:n,openDialog:_,confirmDialog:d,closeDialog:p}=c(),m=(0,r.Fl)((()=>{const t=e.itemsCount,n=(0,u.m5)(t,["товар","товара","товаров"]);return`${t} ${n}`})),f=async t=>{const n=await _();n&&e.removeFromCart(t)};return(t,s)=>{const c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,a.SU)(n)?((0,r.wg)(),(0,r.j4)(F,{key:0,onConfirm:(0,a.SU)(d),onClose:(0,a.SU)(p)},{default:(0,r.w5)((()=>[(0,r.Uk)(" Удалить продукт из корзины? ")])),_:1},8,["onConfirm","onClose"])):(0,r.kq)("",!0),(0,r._)("main",Q,[(0,r._)("div",W,[(0,r._)("ul",B,[(0,r._)("li",N,[(0,r.Wm)(c,{to:{name:(0,a.SU)(l.e0)},class:"breadcrumbs__link"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Каталог ")])),_:1},8,["to"])]),P]),H,(0,r._)("span",O,(0,o.zw)((0,a.SU)(m)),1)]),(0,a.SU)(e).isLoading?((0,r.wg)(),(0,r.j4)(I.Z,{key:0})):(0,a.SU)(e).isError?((0,r.wg)(),(0,r.j4)($.Z,{key:1,onClick:(0,a.SU)(e).getCartProducts},{default:(0,r.w5)((()=>[(0,r.Uk)(" Что-то пошло не так. ")])),_:1},8,["onClick"])):((0,r.wg)(),(0,r.iD)("section",A,[(0,r._)("form",{onSubmit:s[0]||(s[0]=(0,i.iM)((e=>t.$router.push({name:(0,a.SU)(l.UE)})),["prevent"])),class:"cart__form form"},[(0,r._)("div",E,[(0,r._)("ul",G,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(e).items,(({product:t,quantity:n})=>((0,r.wg)(),(0,r.j4)(D,{key:t.id,quantity:n,onRemoveItem:f,onUpdateQuantity:(0,a.SU)(e).updateQuantity,id:t.id,title:t.title,price:t.price,image:t.image.file.url},null,8,["quantity","onUpdateQuantity","id","title","price","image"])))),128))])]),(0,r._)("div",K,[L,(0,r._)("p",T,[(0,r.Uk)(" Итого: "),(0,r._)("span",null,(0,o.zw)((0,a.SU)(u.e8)((0,a.SU)(e).cartTotal))+" ₽",1)]),(0,r.wy)((0,r._)("button",Y," Оформить заказ ",512),[[i.F8,(0,a.SU)(e).cartTotal]])])],32)]))])],64)}}};const R=M;var J=R}}]);
//# sourceMappingURL=811.f420f91a.js.map