"use strict";(self["webpackChunkvue_course"]=self["webpackChunkvue_course"]||[]).push([[106],{5227:function(t,e,l){l.d(e,{Bf:function(){return r},e8:function(){return a},m5:function(){return o},n8:function(){return n}});const r=t=>Object.entries(t).reduce(((t,[e,l])=>"string"===typeof l&&""===l?t:("number"!==typeof l||l)&&l?{...t,[e]:l}:t),{}),a=t=>Intl.NumberFormat().format(t),o=(t,e)=>e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]],n=(t,e)=>t?.map((t=>{const l=t(e);return"string"===typeof l?l:""})).filter((t=>""!==t))},4953:function(t,e,l){l.d(e,{Z:function(){return i}});var r=l(3396);function a(t,e){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.WI)(t.$slots,"default"),(0,r._)("button",(0,r.dG)((0,r.mx)(t.$attrs,!0),{class:"filter__submit button"})," Попробовать еще раз ",16)])}var o=l(89);const n={},s=(0,o.Z)(n,[["render",a]]);var i=s},5367:function(t,e,l){l.d(e,{Z:function(){return _}});var r=l(3396),a=l(7139);const o={class:"dialog__content"},n={class:"dialog__body"};function s(t,e){return(0,r.wg)(),(0,r.iD)("div",{style:(0,a.j5)({"--color":t.$attrs.color||"#fff"}),class:"dialog"},[(0,r._)("div",{class:"dialog__overlay",onClick:e[0]||(e[0]=e=>t.$emit("close"))}),(0,r._)("div",o,[(0,r._)("div",n,[(0,r.WI)(t.$slots,"default",{},void 0,!0)])])],4)}var i=l(89);const c={},u=(0,i.Z)(c,[["render",s],["__scopeId","data-v-825fc20e"]]);var _=u},6213:function(t,e,l){l.d(e,{Z:function(){return _}});var r=l(3396),a=l(7139);const o=t=>((0,r.dD)("data-v-6cd2041e"),t=t(),(0,r.Cn)(),t),n=o((()=>(0,r._)("span",{class:"loader"},null,-1))),s=[n];var i={__name:"AppLoader",props:{app:Boolean},setup(t){return(e,l)=>((0,r.wg)(),(0,r.iD)("div",{class:(0,a.C_)(["container",{container__app:t.app}])},s,2))}},c=l(89);const u=(0,c.Z)(i,[["__scopeId","data-v-6cd2041e"]]);var _=u},5106:function(t,e,l){l.r(e),l.d(e,{default:function(){return J}});var r=l(3396),a=l(4870),o=l(7139),n=l(9242),s=l(2483),i=l(2474),c=l(1885),u=()=>{const t=(0,a.qj)({isLoading:!1,product:null,category:null,error:null}),e=async e=>{try{t.isLoading=!0,t.error=null;const{category:l,...r}=await c.Z.getProductById(e);t.product=r,t.category=l}catch(l){t.error=l}finally{t.isLoading=!1}};return{...(0,a.BK)(t),getProduct:e}},_=l(1434),d=l(5227),m=l(6213),f=l(4953),p=l(5367);const v={key:0},b={key:1},g={style:{color:"#fff"}},y={style:{color:"#9eff00"}},w={class:"content container"},k={class:"content__top"},U={class:"breadcrumbs"},S={class:"breadcrumbs__item"},h={class:"breadcrumbs__item"},C={class:"breadcrumbs__item"},D={class:"breadcrumbs__link"},Z={class:"item"},I={class:"item__pics pics"},j={class:"pics__wrapper"},z=["src","alt"],x={class:"item__info"},L={class:"item__code"},P={class:"item__title"},W={class:"item__form"},H={class:"item__price"},$={class:"form__block"},B=(0,r._)("legend",{class:"form__legend"},"Цвет:",-1),Y={class:"colors"},q={class:"colors__label"},F=(0,r._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-item",value:"blue",checked:""},null,-1),K={class:"item__row"},T={class:"form__counter"},A=(0,r._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-minus"})],-1),E=[A],G=(0,r._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-plus"})],-1),M=[G],N=["disabled"];var O={__name:"ProductPage",setup(t){const e=(0,i.x)(),l=(0,s.yj)(),{product:c,category:A,isLoading:G,error:O,getProduct:V}=u(),J=(0,a.iH)(1),Q=(0,a.iH)(!1),R=(0,r.Fl)((()=>e.checkIsInCart(c.value.id))),X=()=>V(+l.params.id),tt=t=>{t>=1&&(J.value=t)},et=async t=>{await e.addToCard({productId:t,quantity:J.value}),Q.value=!0};return(0,r.YP)((()=>l.params),(()=>X().then((()=>document.title=c.value.title))),{deep:!0,immediate:!0}),(t,l)=>{const s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[Q.value?((0,r.wg)(),(0,r.j4)(p.Z,{key:0,onClose:l[0]||(l[0]=t=>Q.value=!1),color:"#272727"},{default:(0,r.w5)((()=>[(0,a.SU)(e).isError?((0,r.wg)(),(0,r.iD)("div",v,"Ошибка добавления в корзину...")):((0,r.wg)(),(0,r.iD)("div",b,[(0,r._)("p",g,[(0,r.Uk)(" Товар "),(0,r._)("b",y,(0,o.zw)((0,a.SU)(c).title),1),(0,r.Uk)(" успешно добавлен в корзину! ")]),(0,r.Wm)(s,{to:{name:(0,a.SU)(_.TW)},class:"cart__button button button--primery",style:{"text-align":"center"}},{default:(0,r.w5)((()=>[(0,r.Uk)(" Перейти в корзину? ")])),_:1},8,["to"])]))])),_:1})):(0,r.kq)("",!0),(0,r._)("main",w,[(0,a.SU)(G)?((0,r.wg)(),(0,r.j4)(m.Z,{key:0})):(0,a.SU)(O)?((0,r.wg)(),(0,r.j4)(f.Z,{key:1,onClick:X},{default:(0,r.w5)((()=>[(0,r.Uk)(" Что-то пошло не так. ")])),_:1})):((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[(0,r._)("div",k,[(0,r._)("ul",U,[(0,r._)("li",S,[(0,r.Wm)(s,{to:{name:(0,a.SU)(_.e0)},class:"breadcrumbs__link"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Каталог ")])),_:1},8,["to"])]),(0,r._)("li",h,[(0,r.Wm)(s,{to:{name:(0,a.SU)(_.e0)},class:"breadcrumbs__link"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,o.zw)((0,a.SU)(A).title),1)])),_:1},8,["to"])]),(0,r._)("li",C,[(0,r._)("a",D,(0,o.zw)((0,a.SU)(c).title),1)])])]),(0,r._)("section",Z,[(0,r._)("div",I,[(0,r._)("div",j,[(0,r._)("img",{width:"570",height:"570",src:(0,a.SU)(c).image,alt:(0,a.SU)(c).title},null,8,z)])]),(0,r._)("div",x,[(0,r._)("span",L,(0,o.zw)((0,a.SU)(c).id),1),(0,r._)("h2",P,(0,o.zw)((0,a.SU)(c).title),1),(0,r._)("div",W,[(0,r._)("form",{onSubmit:l[4]||(l[4]=(0,n.iM)((t=>et((0,a.SU)(c).id)),["prevent"])),class:"form"},[(0,r._)("b",H,(0,o.zw)((0,a.SU)(d.e8)((0,a.SU)(c).price))+" ₽ ",1),(0,r._)("fieldset",$,[B,(0,r._)("ul",Y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,a.SU)(c).colors,(t=>((0,r.wg)(),(0,r.iD)("li",{key:t.id,class:"colors__item"},[(0,r._)("label",q,[F,(0,r._)("span",{class:"colors__value",style:(0,o.j5)({backgroundColor:t.code})},null,4)])])))),128))])]),(0,r._)("div",K,[(0,r._)("div",T,[(0,r._)("button",{onClick:l[1]||(l[1]=t=>tt(J.value-1)),type:"button","aria-label":"Убрать один товар"},E),(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=t=>J.value=t),name:"count"},null,512),[[n.nr,J.value,void 0,{number:!0}]]),(0,r._)("button",{onClick:l[3]||(l[3]=t=>tt(J.value+1)),type:"button","aria-label":"Добавить один товар"},M)]),(0,r._)("button",{disabled:(0,a.SU)(e).isLoading,class:"button button--primery",type:"submit"},(0,o.zw)((0,a.SU)(R)?"Уже в корзине":"В корзину"),9,N)])],32)])])])],64))])],64)}}};const V=O;var J=V}}]);
//# sourceMappingURL=106.6898248f.js.map