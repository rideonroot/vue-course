{"version":3,"file":"js/106.6898248f.js","mappings":"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","sources":["webpack://vue-course/./src/libs/utils.js","webpack://vue-course/./src/components/AppBtnError.vue","webpack://vue-course/./src/components/AppBtnError.vue?d951","webpack://vue-course/./src/components/AppDialog.vue","webpack://vue-course/./src/components/AppDialog.vue?11d9","webpack://vue-course/./src/components/AppLoader.vue","webpack://vue-course/./src/composables/useProductDetail.js","webpack://vue-course/./src/pages/ProductPage.vue","webpack://vue-course/./src/pages/ProductPage.vue?6d9f"],"sourcesContent":["export const removeEmptyFilterFields = (filterFields) => {\n  return Object.entries(filterFields).reduce((acc, [key, value]) => {\n    if (typeof value === \"string\" && value === \"\") return acc;\n    if (typeof value === \"number\" && !value) return acc;\n    if (!value) return acc;\n\n    return { ...acc, [key]: value };\n  }, {});\n};\n\nexport const numberToPrice = (number) => Intl.NumberFormat().format(number);\n\nexport const declensionNumber = (number, words) => {\n  return words[\n    number % 100 > 4 && number % 100 < 20\n      ? 2\n      : [2, 0, 1, 1, 1, 2][number % 10 < 5 ? number % 10 : 5]\n  ];\n};\n\nexport const getMessagesFromInputRules = (rules, value) => {\n  return rules\n    ?.map((validation) => {\n      const result = validation(value);\n      return typeof result === \"string\" ? result : \"\";\n    })\n    .filter((message) => message !== \"\");\n};\n","<template>\n  <div>\n    <slot />\n\n    <button v-on=\"$attrs\" class=\"filter__submit button\">\n      Попробовать еще раз\n    </button>\n  </div>\n</template>\n","import { render } from \"./AppBtnError.vue?vue&type=template&id=5a989b9e\"\nconst script = {}\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div :style=\"{ '--color': $attrs.color || '#fff' }\" class=\"dialog\">\n    <div class=\"dialog__overlay\" @click=\"$emit('close')\"></div>\n    <div class=\"dialog__content\">\n      <div class=\"dialog__body\">\n        <slot />\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.dialog {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.75);\n\n  padding: 30px;\n  z-index: 1;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    cursor: pointer;\n  }\n\n  &__content {\n    position: absolute;\n    background-color: transparent;\n    border: none;\n    z-index: 2;\n  }\n\n  &__body {\n    background-color: var(--color);\n\n    min-height: 150px;\n    width: auto;\n\n    display: inline-flex;\n    flex-direction: column;\n    align-items: center;\n\n    z-index: 1;\n    overflow: hidden;\n\n    padding: 1.6rem 3rem;\n\n    font-size: 1.2rem;\n    border: 3px solid black;\n    border-radius: 5px;\n    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.2);\n  }\n\n  &__actions {\n    margin-top: auto;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n\n    .btn {\n      color: inherit;\n      font-family: inherit;\n      font-size: inherit;\n      padding: 0.3rem 3.4rem;\n\n      border: 3px solid black;\n      background-color: #fff;\n      box-shadow: 0 0 0 black;\n      transition: all 0.2s;\n      cursor: pointer;\n    }\n\n    .btn:last-child {\n      margin-left: 2.6rem;\n    }\n\n    .btn:hover {\n      box-shadow: 0.4rem 0.4rem 0 black;\n      transform: translate(-0.4rem, -0.4rem);\n    }\n\n    .btn:active {\n      box-shadow: 0 0 0 black;\n      transform: translate(0, 0);\n    }\n  }\n}\n</style>\n","import { render } from \"./AppDialog.vue?vue&type=template&id=825fc20e&scoped=true\"\nconst script = {}\n\nimport \"./AppDialog.vue?vue&type=style&index=0&id=825fc20e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-825fc20e\"]])\n\nexport default __exports__","import script from \"./AppLoader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AppLoader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AppLoader.vue?vue&type=style&index=0&id=6cd2041e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/olegscherbal/Documents/development/study/technozavr/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6cd2041e\"]])\n\nexport default __exports__","import { reactive, toRefs } from \"vue\";\nimport api from \"@/api\";\n\nexport default () => {\n  const state = reactive({\n    isLoading: false,\n    product: null,\n    category: null,\n    error: null,\n  });\n\n  const getProduct = async (productId) => {\n    try {\n      state.isLoading = true;\n      state.error = null;\n\n      const { category, ...product } = await api.getProductById(productId);\n\n      state.product = product;\n      state.category = category;\n    } catch (error) {\n      state.error = error;\n    } finally {\n      state.isLoading = false;\n    }\n  };\n\n  return {\n    ...toRefs(state),\n    getProduct,\n  };\n};\n","<script>\nimport { computed, ref, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { useCartStore } from \"@/store/cart\";\nimport useProductDetail from \"@/composables/useProductDetail\";\nimport { ROUTE_MAIN, ROUTE_CART } from \"@/router/routeNames\";\nimport { numberToPrice } from \"@/libs/utils\";\nimport AppLoader from \"@/components/AppLoader.vue\";\nimport AppBtnError from \"@/components/AppBtnError.vue\";\nimport AppDialog from \"@/components/AppDialog.vue\";\n</script>\n\n<script setup>\nconst store = useCartStore();\nconst route = useRoute();\nconst { product, category, isLoading, error, getProduct } = useProductDetail();\n\nconst productAmount = ref(1);\nconst isDialogOpen = ref(false);\nconst isInCart = computed(() => store.checkIsInCart(product.value.id));\n\nconst loadProduct = () => getProduct(+route.params.id);\n\nconst updateAmount = (value) => {\n  if (value >= 1) productAmount.value = value;\n};\n\nconst addToCart = async (productId) => {\n  await store.addToCard({ productId, quantity: productAmount.value });\n\n  isDialogOpen.value = true;\n};\n\nwatch(\n  () => route.params,\n  () => loadProduct().then(() => (document.title = product.value.title)),\n  {\n    deep: true,\n    immediate: true,\n  }\n);\n</script>\n\n<template>\n  <app-dialog v-if=\"isDialogOpen\" @close=\"isDialogOpen = false\" color=\"#272727\">\n    <div v-if=\"store.isError\">Ошибка добавления в корзину...</div>\n\n    <div v-else>\n      <p style=\"color: #fff\">\n        Товар <b style=\"color: #9eff00\"> {{ product.title }} </b> успешно\n        добавлен в корзину!\n      </p>\n      <router-link\n        :to=\"{ name: ROUTE_CART }\"\n        class=\"cart__button button button--primery\"\n        style=\"text-align: center\"\n      >\n        Перейти в корзину?\n      </router-link>\n    </div>\n  </app-dialog>\n\n  <main class=\"content container\">\n    <app-loader v-if=\"isLoading\" />\n\n    <app-btn-error v-else-if=\"error\" @click=\"loadProduct\">\n      Что-то пошло не так.\n    </app-btn-error>\n\n    <template v-else>\n      <div class=\"content__top\">\n        <ul class=\"breadcrumbs\">\n          <li class=\"breadcrumbs__item\">\n            <router-link :to=\"{ name: ROUTE_MAIN }\" class=\"breadcrumbs__link\">\n              Каталог\n            </router-link>\n          </li>\n          <li class=\"breadcrumbs__item\">\n            <router-link :to=\"{ name: ROUTE_MAIN }\" class=\"breadcrumbs__link\">\n              {{ category.title }}\n            </router-link>\n          </li>\n          <li class=\"breadcrumbs__item\">\n            <a class=\"breadcrumbs__link\"> {{ product.title }} </a>\n          </li>\n        </ul>\n      </div>\n\n      <section class=\"item\">\n        <div class=\"item__pics pics\">\n          <div class=\"pics__wrapper\">\n            <img\n              width=\"570\"\n              height=\"570\"\n              :src=\"product.image\"\n              :alt=\"product.title\"\n            />\n          </div>\n        </div>\n\n        <div class=\"item__info\">\n          <span class=\"item__code\">{{ product.id }}</span>\n          <h2 class=\"item__title\">{{ product.title }}</h2>\n\n          <div class=\"item__form\">\n            <form @submit.prevent=\"addToCart(product.id)\" class=\"form\">\n              <b class=\"item__price\"> {{ numberToPrice(product.price) }} ₽ </b>\n\n              <fieldset class=\"form__block\">\n                <legend class=\"form__legend\">Цвет:</legend>\n                <ul class=\"colors\">\n                  <li\n                    v-for=\"color in product.colors\"\n                    :key=\"color.id\"\n                    class=\"colors__item\"\n                  >\n                    <label class=\"colors__label\">\n                      <input\n                        class=\"colors__radio sr-only\"\n                        type=\"radio\"\n                        name=\"color-item\"\n                        value=\"blue\"\n                        checked=\"\"\n                      />\n                      <span\n                        class=\"colors__value\"\n                        :style=\"{ backgroundColor: color.code }\"\n                      >\n                      </span>\n                    </label>\n                  </li>\n                </ul>\n              </fieldset>\n\n              <div class=\"item__row\">\n                <div class=\"form__counter\">\n                  <button\n                    @click=\"updateAmount(productAmount - 1)\"\n                    type=\"button\"\n                    aria-label=\"Убрать один товар\"\n                  >\n                    <svg width=\"12\" height=\"12\" fill=\"currentColor\">\n                      <use xlink:href=\"#icon-minus\"></use>\n                    </svg>\n                  </button>\n\n                  <input\n                    type=\"text\"\n                    v-model.number=\"productAmount\"\n                    name=\"count\"\n                  />\n\n                  <button\n                    @click=\"updateAmount(productAmount + 1)\"\n                    type=\"button\"\n                    aria-label=\"Добавить один товар\"\n                  >\n                    <svg width=\"12\" height=\"12\" fill=\"currentColor\">\n                      <use xlink:href=\"#icon-plus\"></use>\n                    </svg>\n                  </button>\n                </div>\n\n                <button\n                  :disabled=\"store.isLoading\"\n                  class=\"button button--primery\"\n                  type=\"submit\"\n                >\n                  {{ isInCart ? \"Уже в корзине\" : \"В корзину\" }}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </section>\n    </template>\n  </main>\n</template>\n","import script from \"./ProductPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ProductPage.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["removeEmptyFilterFields","filterFields","Object","entries","reduce","acc","key","value","numberToPrice","number","Intl","NumberFormat","format","declensionNumber","words","getMessagesFromInputRules","rules","map","validation","result","filter","message","_createElementBlock","_renderSlot","_ctx","_createElementVNode","_toHandlers","class","script","__exports__","render","style","color","onClick","undefined","state","reactive","isLoading","product","category","error","getProduct","async","api","productId","toRefs","store","useCartStore","route","useRoute","useProductDetail","productAmount","ref","isDialogOpen","isInCart","computed","checkIsInCart","id","loadProduct","params","updateAmount","addToCart","addToCard","quantity","watch","then","document","title","deep","immediate"],"sourceRoot":""}